#
# LoPresti smart home - scripts
#
#######################################

# this is executed either automatically or as response to statocasa changed to 'Notte'
nightmode:
  alias: Modo notte
  sequence:
    - alias: Spegni lume
      service: homeassistant.turn_off
      entity_id: switch.smartplug
    - service: homeassistant.turn_off
      entity_id: light.led_salone
    - alias: Chiudi finestre
      service: cover.close_cover
      entity_id: group.all_covers

# this is executed as response to statocasa changed to 'Festa'
partymode:
  alias: Modo festa
  sequence:
#    - alias: LED arcobaleno
#      service: homeassistant.turn_on
#      entity_id: light.led_salone
#      ...: rainbow

# this is executed by the 'Spegni cinema' scene: either switch on light or open cover
lucesalone:
  alias: Luce salone dopo cinema
  sequence:
    - service: homeassistant.turn_on
      data_template:
        entity_id: >-
          {% if is_state('sun.sun', 'below_horizon') %}
            switch.smartplug
          {% else %}
            switch.cover_salone_my
          {% endif %}

# this is available in the Media center group to e.g. stop the radio
stopaudio:
  alias: Stop audio
  sequence:
    - alias: Reset Internet radio
      service: input_select.select_option
      data:
        entity_id: input_select.internet_radio
        option: 'Scegli...'
    - alias: Spegni ChromeCast
      service: media_player.turn_off
      entity_id: media_player.chromecast
    - alias: Spegni Amplificatore
      service: media_player.turn_off
      entity_id: media_player.amplificatore_onkyo
