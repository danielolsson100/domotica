#
# LoPresti smart home - scripts
#
#######################################

# this is executed either automatically or as response to statocasa changed to 'Notte'
nightmode:
  alias: Modo notte
  sequence:
    - alias: Spegni lume
      service: homeassistant.turn_off
      entity_id: switch.smartplug
    - alias: Chiudi finestre
      service: cover.close_cover
      entity_id: group.all_covers

# this is executed as response to statocasa changed to 'Festa'
partymode:
  alias: Modo festa
  sequence:
#    - alias: LED arcobaleno
#      service: homeassistant.turn_on
#      entity_id: light.led_salone
#      ...: rainbow

# this is executed by the 'Spegni cinema' scene
lucesalone:
  alias: Luce salone dopo cinema
  sequence:
    - condition: template
      value_template: >
        {% if is_state('sun.sun', 'below_horizon') %}
          true
        {% else %}
          false
        {% endif %}
    - service: homeassistant.turn_on
      entity_id: switch.smartplug
